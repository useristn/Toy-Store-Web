<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head}">
    <title>üöÄ T4M - C·ª≠a h√†ng ƒë·ªì ch∆°i v≈© tr·ª•</title>
</head>
<style>
    /* Scroll Snap Effect */
    html {
        scroll-behavior: smooth;
    }
    
    body {
        scroll-snap-type: y proximity;
    }
    
    section {
        scroll-snap-align: start;
        scroll-snap-stop: normal;
    }
    
    /* Adjust snap for specific sections */
    .hero-section,
    #featured,
    .py-5 {
        scroll-snap-align: start;
    }
    
    /* Text Glowing Effect */
    @keyframes textGlow {
        0%, 100% {
            text-shadow: 0 0 10px rgba(108, 92, 231, 0.5),
                         0 0 20px rgba(108, 92, 231, 0.3),
                         0 0 30px rgba(108, 92, 231, 0.2);
        }
        50% {
            text-shadow: 0 0 20px rgba(108, 92, 231, 0.8),
                         0 0 30px rgba(108, 92, 231, 0.5),
                         0 0 40px rgba(108, 92, 231, 0.3);
        }
    }
    
    .hero-section h1 {
        animation: textGlow 3s ease-in-out infinite;
    }
    
    .space-text {
        position: relative;
        display: inline-block;
    }
    
    .space-text:hover {
        animation: textGlow 2s ease-in-out infinite;
    }
    
    /* Button Ripple Animation */
    .btn {
        position: relative;
        overflow: hidden;
    }
    
    .btn::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
    }
    
    .btn:hover::before {
        width: 300px;
        height: 300px;
    }
    
    .btn > * {
        position: relative;
        z-index: 1;
    }
    
    /* Trust Badges Glass Effect */
    .trust-badges {
        margin-top: 3rem !important;
    }
    
    .trust-badges a {
        display: block;
        height: 100%;
    }
    
    .trust-badge {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 15px;
        padding: 1.5rem 1rem;
        transition: all 0.3s ease;
        text-align: center;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        height: 100%;
        cursor: pointer;
    }
    
    .trust-badge:hover {
        transform: translateY(-5px);
        background: rgba(255, 255, 255, 0.2);
        box-shadow: 0 12px 40px rgba(108, 92, 231, 0.3);
        border-color: rgba(108, 92, 231, 0.3);
    }
    
    .trust-badge i {
        color: #fff;
        filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.8));
        transition: all 0.3s ease;
    }
    
    .trust-badge:hover i {
        color: #fff;
        filter: drop-shadow(0 0 15px rgba(108, 92, 231, 1));
        transform: scale(1.1);
    }
    
    .trust-badge h6 {
        color: #fff;
        font-weight: 600;
        margin-bottom: 0.25rem;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    .trust-badge small {
        color: rgba(255, 255, 255, 0.9);
        font-size: 0.85rem;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }
    
    /* Category Cards Styles */
    .category-card {
        display: block;
        background: white;
        border-radius: 15px;
        padding: 2rem 1rem;
        text-align: center;
        text-decoration: none;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        height: 100%;
        border: 2px solid transparent;
    }
    
    .category-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        border-color: var(--nebula-cyan);
    }
    
    .category-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        transition: transform 0.3s ease;
    }
    
    .category-card:hover .category-icon {
        transform: scale(1.2) rotate(10deg);
    }
    
    .category-card h5 {
        color: #333;
        font-weight: 600;
        margin-bottom: 0.5rem;
        font-size: 1.1rem;
    }
    
    .category-card p {
        margin-bottom: 0;
    }
    
    /* Skeleton Loading Styles */
    .skeleton-card {
        border: none;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        overflow: hidden;
    }
    
    .skeleton {
        background: linear-gradient(
            90deg,
            #f0f0f0 0%,
            #e0e0e0 50%,
            #f0f0f0 100%
        );
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
        border-radius: 8px;
    }
    
    .skeleton-img {
        height: 200px;
        width: 100%;
        border-radius: 0;
    }
    
    .skeleton-title {
        height: 20px;
        width: 80%;
        margin-bottom: 0.75rem;
    }
    
    .skeleton-text {
        height: 14px;
        width: 100%;
        margin-bottom: 0.5rem;
    }
    
    .skeleton-text.short {
        width: 60%;
    }
    
    .skeleton-price {
        height: 24px;
        width: 40%;
        margin-bottom: 0.75rem;
    }
    
    .skeleton-button {
        height: 38px;
        width: 100%;
        border-radius: 6px;
    }
    
    @keyframes shimmer {
        0% {
            background-position: -200% 0;
        }
        100% {
            background-position: 200% 0;
        }
    }
    
    /* Counter Animation Styles */
    .stat-card {
        transition: all 0.3s ease;
    }
    
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }
    
    .counter {
        display: inline-block;
        font-weight: 700;
        color: var(--nebula-cyan);
    }
    
    /* Support Chat Message Styles */
    .message-customer {
        margin-bottom: 1rem;
        display: flex;
    }
    
    .message-customer.user {
        justify-content: flex-end;
    }
    
    .message-customer.admin {
        justify-content: flex-start;
    }
    
    .message-bubble-customer {
        max-width: 70%;
        padding: 0.75rem 1rem;
        border-radius: 15px;
        word-wrap: break-word;
    }
    
    .message-customer.user .message-bubble-customer {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-bottom-right-radius: 5px;
    }
    
    .message-customer.admin .message-bubble-customer {
        background: #e9ecef;
        color: #333;
        border-bottom-left-radius: 5px;
    }
    
    .message-sender-customer {
        font-size: 0.75rem;
        font-weight: 600;
        margin-bottom: 0.25rem;
        opacity: 0.8;
    }
    
    .message-text-customer {
        font-size: 0.95rem;
        line-height: 1.4;
    }
    
    .message-time-customer {
        font-size: 0.7rem;
        margin-top: 0.25rem;
        opacity: 0.7;
    }
    
    /* Responsive Adjustments */
    @media (max-width: 768px) {
        .trust-badge {
            padding: 1rem 0.5rem;
            background: rgba(255, 255, 255, 0.15);
        }
        
        .trust-badge i {
            font-size: 1.5rem;
        }
        
        .trust-badge h6 {
            font-size: 0.9rem;
        }
        
        .hero-section h1 {
            font-size: 2rem;
        }
        
        .category-card {
            padding: 1.5rem 0.75rem;
        }
        
        .category-icon {
            font-size: 2rem;
        }
        
        .category-card h5 {
            font-size: 0.95rem;
        }
        
        .skeleton-img {
            height: 150px;
        }
        
        /* Reduce animation intensity on mobile */
        .btn::before {
            transition: width 0.4s, height 0.4s;
        }
        
        .btn:hover::before {
            width: 200px;
            height: 200px;
        }
    }
    
    @media (max-width: 576px) {
        .trust-badges {
            margin-top: 2rem !important;
        }
        
        .trust-badge h6 {
            font-size: 0.85rem;
        }
        
        .trust-badge small {
            font-size: 0.75rem;
        }
        
        .hero-section h1 {
            font-size: 1.75rem;
            animation: textGlow 4s ease-in-out infinite;
        }
        
        .category-card h5 {
            font-size: 0.9rem;
        }
        
        .category-card p {
            font-size: 0.8rem;
        }
    }
</style>
<body>
<div th:replace="~{fragments/header :: header}"></div>

<!-- Hero Section -->
<section class="hero-section space-bg">
    <div class="container text-center">
        <h1 class="display-4 fw-bold mb-4 fade-in">Ch√†o m·ª´ng ƒë·∫øn v·ªõi thi√™n h√† ƒë·ªì ch∆°i!</h1>
        <p class="lead mb-4 fade-in">Kh√°m ph√° thi√™n h√† ƒë·ªì ch∆°i tuy·ªát v·ªùi nh·∫•t v≈© tr·ª•!</p>
        <div class="fade-in">
            <a href="#featured" class="btn btn-light btn-lg me-3">
                <i class="fas fa-rocket me-2"></i>Bay ƒë·∫øn c·ª≠a h√†ng
            </a>
            <a th:href="@{/products}" class="btn btn-outline-light btn-lg">
                <i class="fas fa-star me-2"></i>Xem t·∫•t c·∫£ s·∫£n ph·∫©m
            </a>
        </div>
        
        <!-- Trust Badges -->
        <div class="row mt-5 trust-badges">
            <div class="col-6 col-md-3 mb-3">
                <a href="#featured" class="text-decoration-none">
                    <div class="trust-badge">
                        <i class="fas fa-shipping-fast fa-2x mb-2"></i>
                        <h6>Giao h√†ng nhanh</h6>
                        <small>Trong 24h</small>
                    </div>
                </a>
            </div>
            <div class="col-6 col-md-3 mb-3">
                <a th:href="@{/return-policy}" class="text-decoration-none">
                    <div class="trust-badge">
                        <i class="fas fa-undo-alt fa-2x mb-2"></i>
                        <h6>ƒê·ªïi tr·∫£ d·ªÖ d√†ng</h6>
                        <small>Trong 7 ng√†y</small>
                    </div>
                </a>
            </div>
            <div class="col-6 col-md-3 mb-3">
                <a th:href="@{/shopping-guide}" class="text-decoration-none">
                    <div class="trust-badge">
                        <i class="fas fa-shield-alt fa-2x mb-2"></i>
                        <h6>100% ch√≠nh h√£ng</h6>
                        <small>Cam k·∫øt ch·∫•t l∆∞·ª£ng</small>
                    </div>
                </a>
            </div>
            <div class="col-6 col-md-3 mb-3">
                <div class="trust-badge" id="openSupportChatHome" style="cursor: pointer;" title="Click ƒë·ªÉ chat v·ªõi admin">
                    <i class="fas fa-headset fa-2x mb-2"></i>
                    <h6>H·ªó tr·ª£ 24/7</h6>
                    <small>Lu√¥n s·∫µn s√†ng</small>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Categories Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-4">
            <h2 class="fw-bold space-text">Danh m·ª•c s·∫£n ph·∫©m</h2>
            <p class="text-muted">Kh√°m ph√° th·∫ø gi·ªõi ƒë·ªì ch∆°i ƒëa d·∫°ng</p>
        </div>
        <div class="row g-3">
            <div class="col-6 col-md-4 col-lg-3">
                <a href="/products?category=1" class="category-card">
                    <div class="category-icon">üöÄ</div>
                    <h5>Xe & Phi thuy·ªÅn</h5>
                    <p class="text-muted small mb-0">Ph∆∞∆°ng ti·ªán v≈© tr·ª•</p>
                </a>
            </div>
            <div class="col-6 col-md-4 col-lg-3">
                <a href="/products?category=2" class="category-card">
                    <div class="category-icon">üß©</div>
                    <h5>X·∫øp h√¨nh</h5>
                    <p class="text-muted small mb-0">ƒê·ªì ch∆°i s√°ng t·∫°o</p>
                </a>
            </div>
            <div class="col-6 col-md-4 col-lg-3">
                <a href="/products?category=3" class="category-card">
                    <div class="category-icon">üî¨</div>
                    <h5>Khoa h·ªçc</h5>
                    <p class="text-muted small mb-0">H·ªçc t·∫≠p vui v·∫ª</p>
                </a>
            </div>
            <div class="col-6 col-md-4 col-lg-3">
                <a href="/products?category=4" class="category-card">
                    <div class="category-icon">‚öΩ</div>
                    <h5>Ngo√†i tr·ªùi</h5>
                    <p class="text-muted small mb-0">V·∫≠n ƒë·ªông th·ªÉ thao</p>
                </a>
            </div>
            <div class="col-6 col-md-4 col-lg-3">
                <a href="/products?category=5" class="category-card">
                    <div class="category-icon">üé®</div>
                    <h5>Ngh·ªá thu·∫≠t</h5>
                    <p class="text-muted small mb-0">S√°ng t·∫°o ngh·ªá thu·∫≠t</p>
                </a>
            </div>
            <div class="col-6 col-md-4 col-lg-3">
                <a href="/products?category=6" class="category-card">
                    <div class="category-icon">ü§ñ</div>
                    <h5>Robot</h5>
                    <p class="text-muted small mb-0">C√¥ng ngh·ªá hi·ªán ƒë·∫°i</p>
                </a>
            </div>
            <div class="col-6 col-md-4 col-lg-3">
                <a href="/products?category=7" class="category-card">
                    <div class="category-icon">üé≤</div>
                    <h5>Board Game</h5>
                    <p class="text-muted small mb-0">Tr√≤ ch∆°i tr√≠ tu·ªá</p>
                </a>
            </div>
            <div class="col-6 col-md-4 col-lg-3">
                <a href="/products?category=8" class="category-card">
                    <div class="category-icon">üë∏</div>
                    <h5>B√∫p b√™</h5>
                    <p class="text-muted small mb-0">B√∫p b√™ xinh ƒë·∫πp</p>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Featured Products -->
<section id="featured" class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold space-text">ƒê·ªì ch∆°i si√™u ƒë·∫∑c bi·ªát</h2>
            <p class="text-muted">Nh·ªØng m√≥n ƒë·ªì ch∆°i ƒë∆∞·ª£c y√™u th√≠ch nh·∫•t trong thi√™n h√†!</p>
        </div>
        <div id="featuredProducts" class="row">
            <!-- Skeleton Loading State -->
            <div class="col-12">
                <div class="row" id="skeletonLoader">
                    <div class="col-md-6 col-lg-3 mb-4" th:each="i : ${#numbers.sequence(1, 8)}">
                        <div class="card skeleton-card">
                            <div class="skeleton skeleton-img"></div>
                            <div class="card-body">
                                <div class="skeleton skeleton-title mb-2"></div>
                                <div class="skeleton skeleton-text mb-2"></div>
                                <div class="skeleton skeleton-text" style="width: 60%;"></div>
                                <div class="d-flex justify-content-between align-items-center mt-3">
                                    <div class="skeleton skeleton-price"></div>
                                    <div class="skeleton skeleton-button"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center mt-4">
            <a th:href="@{/products}" class="btn btn-primary btn-lg">
                <i class="fas fa-rocket me-2"></i>Kh√°m ph√° th√™m
            </a>
        </div>
    </div>
</section>

<!-- Promotion Banner -->
<section class="bg-light py-5" style="background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%) !important;">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h3 class="fw-bold space-text mb-3">∆Øu ƒë√£i Thi√™n h√† ƒê·∫∑c bi·ªát!</h3>
                <p class="text-muted mb-0">Gi·∫£m gi√° l√™n ƒë·∫øn 50% cho t·∫•t c·∫£ ƒë·ªì ch∆°i khoa h·ªçc! C∆° h·ªôi tr·ªü th√†nh nh√† khoa
                    h·ªçc nh√≠ ƒëang ch·ªù c√°c b·∫°n!</p>
            </div>
            <div class="col-md-4 text-end">
                <a th:href="@{/products}" class="btn btn-danger btn-lg">
                    <i class="fas fa-rocket me-2"></i>Kh√°m ph√° ngay
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Fun Facts Section -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold space-text">Nh·ªØng ƒëi·ªÅu th√∫ v·ªã v·ªÅ thi√™n h√† ƒë·ªì ch∆°i</h2>
        </div>
        <div class="row text-center">
            <div class="col-md-3 mb-4">
                <div class="card h-100 stat-card" style="border: 3px solid var(--nebula-cyan); border-radius: 20px;">
                    <div class="card-body">
                        <div class="display-4 mb-3">üöÄ</div>
                        <h5 class="space-text">
                            <span class="counter" data-target="10000">0</span>+
                        </h5>
                        <p class="text-muted">Phi h√†nh gia nh√≠ h·∫°nh ph√∫c</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card h-100 stat-card" style="border: 3px solid var(--galaxy-pink); border-radius: 20px;">
                    <div class="card-body">
                        <div class="display-4 mb-3">üéØ</div>
                        <h5 class="space-text">
                            <span class="counter" data-target="5000">0</span>+
                        </h5>
                        <p class="text-muted">ƒê·ªì ch∆°i tuy·ªát v·ªùi</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card h-100 stat-card" style="border: 3px solid var(--star-yellow); border-radius: 20px;">
                    <div class="card-body">
                        <div class="display-4 mb-3">‚≠ê</div>
                        <h5 class="space-text">
                            <span class="counter" data-target="100">0</span>%
                        </h5>
                        <p class="text-muted">An to√†n & Ch·∫•t l∆∞·ª£ng</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card h-100 stat-card" style="border: 3px solid var(--cosmic-purple); border-radius: 20px;">
                    <div class="card-body">
                        <div class="display-4 mb-3">üåü</div>
                        <h5 class="space-text">24/7</h5>
                        <p class="text-muted">H·ªó tr·ª£ v≈© tr·ª•</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Support Chat Modal -->
<div
  class="modal fade"
  id="supportChatModal"
  tabindex="-1"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div
      class="modal-content"
      style="border-radius: 15px; overflow: hidden"
    >
      <div
        class="modal-header"
        style="
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
        "
      >
        <h5 class="modal-title">
          <i class="fas fa-comments me-2"></i>H·ªó tr·ª£ kh√°ch h√†ng
        </h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="modal"
        ></button>
      </div>
      <div class="modal-body p-0">
        <div
          id="supportChatContainer"
          style="height: 500px; display: flex; flex-direction: column"
        >
          <div
            id="supportMessages"
            style="
              flex: 1;
              overflow-y: auto;
              padding: 1.5rem;
              background: #f8f9fa;
            "
          >
            <div class="text-center py-5">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">ƒêang k·∫øt n·ªëi...</span>
              </div>
              <p class="mt-2 text-muted">ƒêang k·∫øt n·ªëi v·ªõi admin...</p>
            </div>
          </div>
          <div
            class="typing-indicator-customer"
            id="typingIndicatorCustomer"
            style="
              display: none;
              padding: 0.5rem 1.5rem;
              font-size: 0.85rem;
              color: #666;
              font-style: italic;
            "
          >
            <i class="fas fa-circle-notch fa-spin"></i> Admin ƒëang nh·∫≠p...
          </div>
          <div class="p-3 bg-white" style="border-top: 2px solid #e0e0e0">
            <form id="supportChatForm" class="d-flex gap-2">
              <input
                type="text"
                id="supportMessageInput"
                class="form-control"
                placeholder="Nh·∫≠p tin nh·∫Øn..."
                autocomplete="off"
                style="border-radius: 25px"
              />
              <button
                type="submit"
                class="btn btn-primary"
                style="border-radius: 50%; width: 45px; height: 45px"
              >
                <i class="fas fa-paper-plane"></i>
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>
<script th:src="@{/js/auth.js}"></script>
<script th:src="@{/js/home.js}" defer></script>
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
<script th:src="@{/js/support-chat.js}" defer></script>
<script>
// Add click handler for home page support badge
document.addEventListener('DOMContentLoaded', function() {
    const supportBadge = document.getElementById('openSupportChatHome');
    if (supportBadge) {
        supportBadge.addEventListener('click', function() {
            // Check if user is logged in
            const token = localStorage.getItem('authToken');
            if (!token) {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ s·ª≠ d·ª•ng ch·ª©c nƒÉng h·ªó tr·ª£!');
                window.location.href = '/login';
                return;
            }
            
            // Call the openSupportChat function from support-chat.js
            if (typeof openSupportChat === 'function') {
                openSupportChat();
            } else {
                console.error('openSupportChat function not found');
            }
        });
    }
});
</script>
</body>
</html>
