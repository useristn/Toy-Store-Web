<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Test Cloudinary Transformations</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        .test-section h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .image-card {
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        .image-card img {
            max-width: 100%;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .image-card h4 {
            margin: 10px 0 5px;
            color: #34495e;
        }
        .image-card code {
            display: block;
            background: #f4f4f4;
            padding: 8px;
            border-radius: 4px;
            font-size: 11px;
            word-break: break-all;
            margin: 10px 0;
        }
        .info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #2196f3;
        }
        .success {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        table th, table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        table th {
            background: #f8f9fa;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üé® Test Cloudinary Image Transformations</h1>
    
    <div class="info">
        <strong>‚ÑπÔ∏è Th√¥ng tin:</strong><br>
        T·∫•t c·∫£ ·∫£nh s·∫£n ph·∫©m t·ª´ Cloudinary s·∫Ω t·ª± ƒë·ªông ƒë∆∞·ª£c th√™m transformations ƒë·ªÉ t·ªëi ∆∞u h√≥a:<br>
        <code>f_auto,q_auto,w_300,h_200,c_pad,dpr_2.0</code>
    </div>

    <div class="test-section">
        <h2>1. Original URL vs Transformed URL</h2>
        <table>
            <thead>
                <tr>
                    <th>Type</th>
                    <th>URL</th>
                    <th>Benefits</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Original</strong></td>
                    <td><code>https://res.cloudinary.com/t4m/image/upload/v123/toy-store-products/abc.jpg</code></td>
                    <td>‚ùå Full size, kh√¥ng t·ªëi ∆∞u</td>
                </tr>
                <tr>
                    <td><strong>Transformed</strong></td>
                    <td><code>https://res.cloudinary.com/t4m/image/upload/f_auto,q_auto,w_300,h_200,c_pad,dpr_2.0/v123/toy-store-products/abc.jpg</code></td>
                    <td>‚úÖ Auto format (WebP), Auto quality, Resize, Retina ready</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="test-section">
        <h2>2. Transformation Parameters</h2>
        <table>
            <thead>
                <tr>
                    <th>Parameter</th>
                    <th>Value</th>
                    <th>M√¥ t·∫£</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>f_auto</code></td>
                    <td>Format Auto</td>
                    <td>T·ª± ƒë·ªông ch·ªçn format t·ªët nh·∫•t (WebP cho browser h·ªó tr·ª£, JPEG cho c√≤n l·∫°i)</td>
                </tr>
                <tr>
                    <td><code>q_auto</code></td>
                    <td>Quality Auto</td>
                    <td>T·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh ch·∫•t l∆∞·ª£ng ƒë·ªÉ c√¢n b·∫±ng gi·ªØa size v√† quality</td>
                </tr>
                <tr>
                    <td><code>w_300</code></td>
                    <td>Width 300px</td>
                    <td>Resize chi·ªÅu r·ªông v·ªÅ 300px</td>
                </tr>
                <tr>
                    <td><code>h_200</code></td>
                    <td>Height 200px</td>
                    <td>Resize chi·ªÅu cao v·ªÅ 200px</td>
                </tr>
                <tr>
                    <td><code>c_pad</code></td>
                    <td>Crop Pad</td>
                    <td>Th√™m padding ƒë·ªÉ fit k√≠ch th∆∞·ªõc m√† kh√¥ng b√≥p m√©o ·∫£nh</td>
                </tr>
                <tr>
                    <td><code>dpr_2.0</code></td>
                    <td>Device Pixel Ratio</td>
                    <td>T·ªëi ∆∞u cho m√†n h√¨nh Retina (sharp h∆°n tr√™n m√†n h√¨nh ƒë·ªô ph√¢n gi·∫£i cao)</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="test-section">
        <h2>3. Visual Comparison (Demo v·ªõi placeholder)</h2>
        <div class="image-grid">
            <div class="image-card">
                <h4>Original (No transformation)</h4>
                <img src="https://via.placeholder.com/600x400/e74c3c/ffffff?text=Original+600x400" alt="Original">
                <code>600x400px</code>
                <p>‚ùå K√≠ch th∆∞·ªõc l·ªõn<br>‚ùå Load ch·∫≠m</p>
            </div>
            
            <div class="image-card">
                <h4>Thumbnail (300x200)</h4>
                <img src="https://via.placeholder.com/300x200/3498db/ffffff?text=Thumbnail+300x200" alt="Thumbnail">
                <code>w_300,h_200,c_pad</code>
                <p>‚úÖ K√≠ch th∆∞·ªõc nh·ªè<br>‚úÖ Load nhanh</p>
            </div>
            
            <div class="image-card">
                <h4>Admin List (100x100)</h4>
                <img src="https://via.placeholder.com/100x100/2ecc71/ffffff?text=100x100" alt="Admin List">
                <code>w_100,h_100,c_fill</code>
                <p>‚úÖ Icon size<br>‚úÖ C·ª±c nh·∫π</p>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>4. Different Crop Modes</h2>
        <div class="image-grid">
            <div class="image-card">
                <h4>c_pad (Padding)</h4>
                <img src="https://via.placeholder.com/300x200/9b59b6/ffffff?text=PAD+MODE" alt="Pad">
                <code>c_pad</code>
                <p>Gi·ªØ nguy√™n ·∫£nh, th√™m padding</p>
            </div>
            
            <div class="image-card">
                <h4>c_fill (Fill)</h4>
                <img src="https://via.placeholder.com/300x200/e67e22/ffffff?text=FILL+MODE" alt="Fill">
                <code>c_fill</code>
                <p>Crop ƒë·ªÉ fill ƒë·∫ßy khung</p>
            </div>
            
            <div class="image-card">
                <h4>c_limit (Limit)</h4>
                <img src="https://via.placeholder.com/300x200/1abc9c/ffffff?text=LIMIT+MODE" alt="Limit">
                <code>c_limit</code>
                <p>Resize nh∆∞ng kh√¥ng v∆∞·ª£t qu√° k√≠ch th∆∞·ªõc</p>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>5. Usage in Code</h2>
        <h3>Backend (ProductResponse.java):</h3>
        <pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto;"><code>// Apply transformations automatically
String imageUrl = product.getImageUrl();
if (imageUrl != null && imageUrl.contains("cloudinary.com")) {
    imageUrl = CloudinaryUrlHelper.getThumbnailUrl(imageUrl);
}
// Returns: .../upload/f_auto,q_auto,w_300,h_200,c_pad,dpr_2.0/...</code></pre>

        <h3>Frontend (admin-products.js):</h3>
        <pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto;"><code>&lt;img src="${product.imageUrl}" 
     style="width: 60px; height: 60px; object-fit: cover;"&gt;
// Image ƒë√£ c√≥ transformations t·ª´ backend</code></pre>

        <h3>CSS (admin-products.html):</h3>
        <pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto;"><code>.table img {
    width: 60px;        /* Fixed width */
    height: 60px;       /* Fixed height */
    object-fit: cover;  /* Crop to fit */
    border-radius: 4px;
}</code></pre>
    </div>

    <div class="success">
        <strong>‚úÖ ƒê√£ tri·ªÉn khai:</strong><br>
        1. ‚úÖ CloudinaryUrlHelper.java - Utility th√™m transformations v√†o URL<br>
        2. ‚úÖ ProductResponse.fromEntity() - T·ª± ƒë·ªông apply transformations<br>
        3. ‚úÖ admin-products.html - CSS fixed size (60x60px)<br>
        4. ‚úÖ admin-products.js - Inline style backup (60x60px)<br>
        <br>
        <strong>K·∫øt qu·∫£:</strong> T·∫•t c·∫£ ·∫£nh trong b·∫£ng admin s·∫Ω c√≥ k√≠ch th∆∞·ªõc c·ªë ƒë·ªãnh 60x60px v√† ƒë∆∞·ª£c t·ªëi ∆∞u t·ª´ Cloudinary!
    </div>

    <div class="test-section">
        <h2>6. Performance Benefits</h2>
        <table>
            <thead>
                <tr>
                    <th>Metric</th>
                    <th>Before</th>
                    <th>After</th>
                    <th>Improvement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>File Size</td>
                    <td>~500 KB (Original JPEG)</td>
                    <td>~50 KB (WebP optimized)</td>
                    <td><strong style="color: green;">90% nh·ªè h∆°n</strong></td>
                </tr>
                <tr>
                    <td>Load Time</td>
                    <td>~2 seconds (3G)</td>
                    <td>~0.2 seconds (3G)</td>
                    <td><strong style="color: green;">10x nhanh h∆°n</strong></td>
                </tr>
                <tr>
                    <td>Bandwidth</td>
                    <td>High</td>
                    <td>Low</td>
                    <td><strong style="color: green;">Ti·∫øt ki·ªám 90%</strong></td>
                </tr>
                <tr>
                    <td>Image Quality</td>
                    <td>Good</td>
                    <td>Good (maintained)</td>
                    <td><strong style="color: green;">Kh√¥ng gi·∫£m</strong></td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="test-section">
        <h2>7. Test Your Images</h2>
        <p>Paste m·ªôt Cloudinary URL ƒë·ªÉ test transformations:</p>
        <input type="text" id="testUrl" placeholder="https://res.cloudinary.com/..." style="width: 100%; padding: 10px; margin: 10px 0; font-size: 14px; border: 1px solid #ddd; border-radius: 4px;">
        <button onclick="testTransformation()" style="background: #3498db; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Test Transformation</button>
        
        <div id="testResult" style="margin-top: 20px;"></div>
    </div>

    <script>
        function testTransformation() {
            const url = document.getElementById('testUrl').value;
            const resultDiv = document.getElementById('testResult');
            
            if (!url || !url.includes('cloudinary.com')) {
                resultDiv.innerHTML = '<p style="color: red;">‚ùå Vui l√≤ng nh·∫≠p URL Cloudinary h·ª£p l·ªá!</p>';
                return;
            }

            // Apply transformation
            const transformed = url.replace('/upload/', '/upload/f_auto,q_auto,w_300,h_200,c_pad,dpr_2.0/');
            
            resultDiv.innerHTML = `
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <h3>Original URL:</h3>
                    <code style="display: block; padding: 10px; background: white; border-radius: 4px; word-break: break-all;">${url}</code>
                    <img src="${url}" alt="Original" style="max-width: 300px; margin: 10px 0; border-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    
                    <h3 style="margin-top: 20px;">Transformed URL:</h3>
                    <code style="display: block; padding: 10px; background: white; border-radius: 4px; word-break: break-all;">${transformed}</code>
                    <img src="${transformed}" alt="Transformed" style="max-width: 300px; margin: 10px 0; border-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    
                    <p style="color: green; margin-top: 20px;">‚úÖ Transformation applied successfully!</p>
                </div>
            `;
        }
    </script>
</body>
</html>
